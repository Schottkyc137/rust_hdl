# ยง10: Sequential Statements

Assertion: !Sequence
  - keyword: Assert
  - node: Expression
    name: condition
  - keyword: Report
    optional: true
  - node: Expression
    optional: true
    name: report
  - keyword: Severity
    optional: true
  - node: Expression
    name: severity
    optional: true

AssertionStatement: !Sequence
  - token: Identifier
    name: label
    optional: true
  - token: Colon
    optional: true
  - node: Assertion
  - token: SemiColon

CaseStatementAlternative: !Sequence
  - keyword: When
  - node: Choices
  - token: RightArrow
  - node: SequenceOfStatements

CaseStatement: !Sequence
  - token: Identifier
    name: case_label
    optional: true
  - token: Colon
    optional: true
  - keyword: Case
  - token: Que
    optional: true
  - node: Expression
    optional: true
  - keyword: Is
  - node: CaseStatementAlternative
    repeated: true
  - keyword: End
  - keyword: Case
    name: trailing_case_token
  - token: Que
    optional: true
    name: trailing_que_token
  - token: Identifier
    name: trailing_case_label
    optional: true
  - token: SemiColon

Condition: !Alias
  node: Expression

ConditionClause: !Sequence
  - keyword: Until
  - node: Condition

ConditionalWhenExpression: !Sequence
  - node: Expression
  - keyword: When
  - node: Expression
    name: condition

ConditionalElseWhenExpression: !Sequence
  - keyword: Else
  - node: Expression
  - keyword: When
  - node: Expression
    name: condition

ConditionalElseItem: !Sequence
  - keyword: Else
  - node: Expression

ConditionalExpressions: !Sequence
  - node: ConditionalWhenExpression
  - node: ConditionalElseWhenExpression
    repeated: true
  - node: ConditionalElseItem

ConditionalForceAssignment: !Sequence
  - node: Target
  - token: LTE
  - keyword: Force
  - node: ForceMode
    optional: true
  - node: ConditionalExpressions
  - token: SemiColon

ConditionalSignalAssignment: !Choice
  - node: ConditionalWaveformAssignment
  - node: ConditionalForceAssignment

ConditionalVariableAssignment: !Sequence
  - node: Target
  - token: ColonEq
  - node: ConditionalExpressions
  - token: SemiColon

ConditionalWaveformAssignment: !Sequence
  - node: Target
  - token: LTE
  - node: DelayMechanism
    optional: true
  - node: ConditionalWaveforms
  - token: SemiColon

ConditionalWaveformItem: !Sequence
  - node: Waveform
  - keyword: When
  - node: Condition

ConditionalWaveformWhenExpression: !Sequence
  - node: Waveform
  - keyword: When
  - node: Expression
    name: condition

ConditionalWaveformElseWhenExpression: !Sequence
  - keyword: Else
  - node: Waveform
  - keyword: When
  - node: Expression
    name: condition

ConditionalWaveformElseItem: !Sequence
  - keyword: Else
  - node: Waveform

ConditionalWaveforms: !Sequence
  - node: ConditionalWaveformWhenExpression
  - node: ConditionalWaveformElseWhenExpression
    repeated: true
  - node: ConditionalWaveformElseItem

TransportDelayMechanism: !Sequence
  - keyword: Transport

InertialDelayMechanism: !Sequence
  - keyword: Reject
    optional: true
  - node: TimeExpression
    optional: true
  - keyword: Inertial

DelayMechanism: !Choice
  - node: TransportDelayMechanism
  - node: InertialDelayMechanism


ExitStatement: !Sequence
  - token: Identifier
    name: label
    optional: true
  - token: Colon
    optional: true
  - keyword: Exit
  - token: Identifier
    name: loop_label
    optional: true
  - keyword: When
    optional: true
  - node: Condition
    optional: true
  - token: SemiColon

ForceMode: !Choice
  - keyword: In
  - keyword: Out

IfStatementElsif: !Sequence
  - keyword: Elsif
  - node: Condition
  - keyword: Then
  - node: SequenceOfStatements

IfStatementElse: !Sequence
  - keyword: Else
  - node: SequenceOfStatements

IfStatement: !Sequence
  - token: Identifier
    name: if_label
    optional: true
  - token: Colon
    optional: true
  - keyword: If
  - node: Condition
  - keyword: Then
  - node: SequenceOfStatements
  - node: IfStatementElsif
    repeated: true
  - node: IfStatementElse
    optional: true
  - keyword: End
  - keyword: If
    name: trailing_if_token
  - token: Identifier
    name: trailing_if_label
    optional: true
  - token: SemiColon

WhileIterationScheme: !Sequence
  - keyword: While
  - node: Condition

ForIterationScheme: !Sequence
  - keyword: For
  - node: LoopParameterSpecification

IterationScheme: !Choice
  - node: WhileIterationScheme
  - node: ForIterationScheme

LoopStatement: !Sequence
  - node: Label
  - node: IterationScheme
    optional: true
  - keyword: Loop
  - node: SequenceOfStatements
  - keyword: End
  - keyword: Loop
    name: trailing_loop_token
  - token: Identifier
    name: trailing_loop_label
    optional: true
  - token: SemiColon

NextStatement: !Sequence
  - node: Label
  - keyword: Next
  - token: Identifier
    name: loop_label
    optional: true
  - keyword: When
    optional: true
  - node: Condition
    optional: true
  - token: SemiColon

# NullStatement: !Sequence
#   - token: Identifier
#     name: label
#     optional: true
#   - token: Colon
#     optional: true
#   - keyword: Null
#   - token: SemiColon

ParameterSpecification: !Sequence
  - token: Identifier
  - keyword: In
  - node: DiscreteRange

ProcedureCall: !Sequence
  - node: ProcedureName
  - token: LeftPar
    optional: true
  - node: ActualParameterPart
    optional: true
  - token: RightPar
    optional: true

ProcedureCallStatement: !Sequence
  - node: Label
  - node: ProcedureCall
  - token: SemiColon

ReportStatement: !Sequence
  - node: Label
  - keyword: Report
  - node: Expression
    name: report
  - keyword: Severity
    optional: true
  - node: Expression
    name: severity
    optional: true

ReturnStatement: !Sequence
  - node: Label
  - keyword: Return
  - node: Expression
    optional: true

SelectedExpressionItem: !Sequence
  - node: Expression
  - keyword: When
  - node: Choices
  - token: Comma
    optional: true

SelectedExpressions: !Sequence
  - node: SelectedExpressionItem
    repeated: true
  - node: Expression
    optional: true

SelectedForceAssignment: !Sequence
  - keyword: With
  - node: Expression
  - keyword: Select
  - token: Que
    optional: true
  - node: Target
  - token: LTE
  - keyword: Force
  - node: ForceMode
    optional: true
  - node: SelectedExpressions
  - token: SemiColon

SelectedWaveformItem: !Sequence
  - node: Waveform
  - keyword: When
  - node: Choices
  - token: Comma
    optional: true

SelectedWaveforms: !Sequence
  - node: SelectedWaveformItem
    repeated: true
  - node: Waveform
    optional: true

SelectedSignalAssignment: !Choice
  - node: SelectedWaveformAssignment
  - node: SelectedForceAssignment

SelectedVariableAssignment: !Sequence
  - keyword: With
  - node: Expression
  - keyword: Select
  - token: Que
    optional: true
  - node: Target
  - token: ColonEq
  - node: SelectedExpressions
  - token: SemiColon

SelectedWaveformAssignment: !Sequence
  - keyword: With
  - node: Expression
  - keyword: Select
  - token: Que
    optional: true
  - node: Target
  - token: LTE
  - node: DelayMechanism
    optional: true
  - node: SelectedWaveforms
  - token: SemiColon

SensitivityClause: !Sequence
  - keyword: On
  - node: SensitivityList

SensitivityList: !Alias
  node: NameList

SequenceOfStatements: !Sequence
  - node: SequentialStatement
    repeated: true

SequentialStatement: !Choice
  - node: WaitStatement
  - node: AssertionStatement
  - node: ReportStatement
  - node: SignalAssignmentStatement
  - node: VariableAssignmentStatement
  - node: ProcedureCallStatement
  - node: IfStatement
  - node: CaseStatement
  - node: LoopStatement
  - node: NextStatement
  - node: ExitStatement
  - node: ReturnStatement
  - node: NullStatement

SignalAssignmentStatement: !Sequence
  - node: Label
  - node: SimpleSignalAssignment
    optional: true
  - node: ConditionalSignalAssignment
    optional: true
  - node: SelectedSignalAssignment
    optional: true

SimpleForceAssignment: !Sequence
  - node: Target
  - token: LTE
  - keyword: Force
  - node: ForceMode
    optional: true
  - node: Expression
  - token: SemiColon

SimpleReleaseAssignment: !Sequence
  - node: Target
  - token: LTE
  - keyword: Release
  - node: ForceMode
    optional: true
  - token: SemiColon

SimpleWaveformAssignment: !Sequence
  - node: Target
  - token: LTE
  - node: DelayMechanism
    optional: true
  - node: Waveform
  - token: SemiColon

SimpleSignalAssignment: !Choice
  - node: SimpleWaveformAssignment
  - node: SimpleForceAssignment
  - node: SimpleReleaseAssignment

SimpleVariableAssignment: !Sequence
  - node: Target
  - token: ColonEq
  - node: Expression
  - token: SemiColon

Target: !Choice
  - node: Name
  - node: Aggregate

TimeoutClause: !Sequence
  - keyword: For
  - node: TimeExpression

VariableAssignmentStatement: !Choice
  - node: SimpleVariableAssignment
  - node: ConditionalVariableAssignment
  - node: SelectedVariableAssignment

WaitStatement: !Sequence
  - token: Identifier
    name: label
    optional: true
  - token: Colon
    optional: true
  - keyword: Wait
  - node: SensitivityClause
    optional: true
  - node: ConditionClause
    optional: true
  - node: TimeoutClause
    optional: true
  - token: SemiColon

WaveformElement: !Sequence
  - node: Expression
  - keyword: After
  - node: Expression
    name: time_expression

WaveformElements: !Sequence
  - node: WaveformElement
    repeated: true
  - token: Comma
    repeated: true

UnaffectedWaveformElements: !Sequence
  - keyword: Unaffected

Waveform: !Choice
  - node: WaveformElements
  - node: UnaffectedWaveform
